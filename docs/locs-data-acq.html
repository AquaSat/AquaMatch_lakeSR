<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>3 Locations of Data Acquisition | AquaMatch: lakeSR and siteSR</title>
  <meta name="description" content="Acquisition and compilation of satellite surface reflectance data for all lakes in the United States and US Territories." />
  <meta name="generator" content="bookdown 0.43 and GitBook 2.6.7" />

  <meta property="og:title" content="3 Locations of Data Acquisition | AquaMatch: lakeSR and siteSR" />
  <meta property="og:type" content="book" />
  
  <meta property="og:description" content="Acquisition and compilation of satellite surface reflectance data for all lakes in the United States and US Territories." />
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="3 Locations of Data Acquisition | AquaMatch: lakeSR and siteSR" />
  
  <meta name="twitter:description" content="Acquisition and compilation of satellite surface reflectance data for all lakes in the United States and US Territories." />
  

<meta name="author" content="ROSSyndicate" />


<meta name="date" content="2025-08-04" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="background.html"/>
<link rel="next" href="software-settings.html"/>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>
<script src="libs/kePrint-0.0.1/kePrint.js"></script>
<link href="libs/lightable-0.0.1/lightable.css" rel="stylesheet" />


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<style type="text/css">
  
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
</style>
<style type="text/css">
/* Used with Pandoc 2.11+ new --citeproc when CSL is used */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
  margin-bottom: 0em;
}
.hanging div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}
</style>

</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Introduction</a>
<ul>
<li class="chapter" data-level="1.1" data-path="index.html"><a href="index.html#repository-links-for-the-aquamatch-data-suite"><i class="fa fa-check"></i><b>1.1</b> Repository Links for the AquaMatch Data Suite</a></li>
<li class="chapter" data-level="1.2" data-path="index.html"><a href="index.html#note"><i class="fa fa-check"></i><b>1.2</b> Note</a></li>
<li class="chapter" data-level="1.3" data-path="index.html"><a href="index.html#disclaimer"><i class="fa fa-check"></i><b>1.3</b> Disclaimer</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="background.html"><a href="background.html"><i class="fa fa-check"></i><b>2</b> Background</a>
<ul>
<li class="chapter" data-level="2.1" data-path="background.html"><a href="background.html#lakesr-code-architecture"><i class="fa fa-check"></i><b>2.1</b> lakeSR Code Architecture</a>
<ul>
<li class="chapter" data-level="2.1.1" data-path="background.html"><a href="background.html#lakesr-targets-groups"><i class="fa fa-check"></i><b>2.1.1</b> lakeSR {targets} groups</a></li>
<li class="chapter" data-level="2.1.2" data-path="background.html"><a href="background.html#lakesr-output-files"><i class="fa fa-check"></i><b>2.1.2</b> lakeSR Output Files</a></li>
<li class="chapter" data-level="2.1.3" data-path="background.html"><a href="background.html#lakesr-config"><i class="fa fa-check"></i><b>2.1.3</b> Configuration Files</a></li>
<li class="chapter" data-level="2.1.4" data-path="background.html"><a href="background.html#repository-folder-structure"><i class="fa fa-check"></i><b>2.1.4</b> Repository Folder Structure</a></li>
</ul></li>
<li class="chapter" data-level="2.2" data-path="background.html"><a href="background.html#sitesr-code-architecture"><i class="fa fa-check"></i><b>2.2</b> siteSR Code Architecture</a>
<ul>
<li class="chapter" data-level="2.2.1" data-path="background.html"><a href="background.html#targets-groups"><i class="fa fa-check"></i><b>2.2.1</b> {targets} Groups</a></li>
<li class="chapter" data-level="2.2.2" data-path="background.html"><a href="background.html#sitesr-output-files"><i class="fa fa-check"></i><b>2.2.2</b> siteSR Output Files</a></li>
<li class="chapter" data-level="2.2.3" data-path="background.html"><a href="background.html#setup-description"><i class="fa fa-check"></i><b>2.2.3</b> Configuration Files</a></li>
<li class="chapter" data-level="2.2.4" data-path="background.html"><a href="background.html#repository-folder-structure-1"><i class="fa fa-check"></i><b>2.2.4</b> Repository Folder Structure</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="3" data-path="locs-data-acq.html"><a href="locs-data-acq.html"><i class="fa fa-check"></i><b>3</b> Locations of Data Acquisition</a>
<ul>
<li class="chapter" data-level="3.1" data-path="locs-data-acq.html"><a href="locs-data-acq.html#waterbodies"><i class="fa fa-check"></i><b>3.1</b> Waterbodies Included in lakeSR</a>
<ul>
<li class="chapter" data-level="3.1.1" data-path="locs-data-acq.html"><a href="locs-data-acq.html#updates-in-aquamatch"><i class="fa fa-check"></i><b>3.1.1</b> Updates in AquaMatch</a></li>
<li class="chapter" data-level="3.1.2" data-path="locs-data-acq.html"><a href="locs-data-acq.html#poi"><i class="fa fa-check"></i><b>3.1.2</b> Pole of Inaccessibility</a></li>
<li class="chapter" data-level="3.1.3" data-path="locs-data-acq.html"><a href="locs-data-acq.html#technical-implementation-of-lakesr"><i class="fa fa-check"></i><b>3.1.3</b> Technical Implementation of lakeSR</a></li>
<li class="chapter" data-level="3.1.4" data-path="locs-data-acq.html"><a href="locs-data-acq.html#lakeSR-shoreline"><i class="fa fa-check"></i><b>3.1.4</b> Flagging shoreline proximity</a></li>
<li class="chapter" data-level="3.1.5" data-path="locs-data-acq.html"><a href="locs-data-acq.html#case-study-wisconsin-waterbodies"><i class="fa fa-check"></i><b>3.1.5</b> Case Study: Wisconsin Waterbodies</a></li>
</ul></li>
<li class="chapter" data-level="3.2" data-path="locs-data-acq.html"><a href="locs-data-acq.html#siteSR-locs"><i class="fa fa-check"></i><b>3.2</b> siteSR Acquisition Locations</a>
<ul>
<li class="chapter" data-level="3.2.1" data-path="locs-data-acq.html"><a href="locs-data-acq.html#rs-vis"><i class="fa fa-check"></i><b>3.2.1</b> Assessing for remote sensing visibility</a></li>
<li class="chapter" data-level="3.2.2" data-path="locs-data-acq.html"><a href="locs-data-acq.html#fl-wb-assignment"><i class="fa fa-check"></i><b>3.2.2</b> Assignment of NHD flowline and waterbodies</a></li>
<li class="chapter" data-level="3.2.3" data-path="locs-data-acq.html"><a href="locs-data-acq.html#sitesr-updates-in-aquamatch"><i class="fa fa-check"></i><b>3.2.3</b> siteSR updates in AquaMatch</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="4" data-path="software-settings.html"><a href="software-settings.html"><i class="fa fa-check"></i><b>4</b> Satellite Data Acquisition Software and Settings</a>
<ul>
<li class="chapter" data-level="4.1" data-path="software-settings.html"><a href="software-settings.html#r-environment-and-package-information"><i class="fa fa-check"></i><b>4.1</b> R Environment and Package Information</a></li>
<li class="chapter" data-level="4.2" data-path="software-settings.html"><a href="software-settings.html#reticulate-conda-environment"><i class="fa fa-check"></i><b>4.2</b> {reticulate} Conda Environment</a></li>
<li class="chapter" data-level="4.3" data-path="software-settings.html"><a href="software-settings.html#google-earth-engine-setup"><i class="fa fa-check"></i><b>4.3</b> Google Earth Engine Setup</a>
<ul>
<li class="chapter" data-level="4.3.1" data-path="software-settings.html"><a href="software-settings.html#create-account"><i class="fa fa-check"></i><b>4.3.1</b> Create a GEE account</a></li>
<li class="chapter" data-level="4.3.2" data-path="software-settings.html"><a href="software-settings.html#gcloud"><i class="fa fa-check"></i><b>4.3.2</b> gcloud CLI</a></li>
<li class="chapter" data-level="4.3.3" data-path="software-settings.html"><a href="software-settings.html#proj-setting"><i class="fa fa-check"></i><b>4.3.3</b> GEE project setting</a></li>
<li class="chapter" data-level="4.3.4" data-path="software-settings.html"><a href="software-settings.html#auth"><i class="fa fa-check"></i><b>4.3.4</b> GEE Authentication</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="5" data-path="LS-C2-SRST.html"><a href="LS-C2-SRST.html"><i class="fa fa-check"></i><b>5</b> Landsat Collection 2 SRST</a>
<ul>
<li class="chapter" data-level="5.1" data-path="LS-C2-SRST.html"><a href="LS-C2-SRST.html#initialisms-and-landsat-jargon"><i class="fa fa-check"></i><b>5.1</b> Initialisms and Landsat Jargon</a></li>
<li class="chapter" data-level="5.2" data-path="LS-C2-SRST.html"><a href="LS-C2-SRST.html#valid-dates"><i class="fa fa-check"></i><b>5.2</b> Background Information</a>
<ul>
<li class="chapter" data-level="5.2.1" data-path="LS-C2-SRST.html"><a href="LS-C2-SRST.html#band-value-ranges"><i class="fa fa-check"></i><b>5.2.1</b> Band Value Ranges</a></li>
<li class="chapter" data-level="5.2.2" data-path="LS-C2-SRST.html"><a href="LS-C2-SRST.html#sensor-resolution"><i class="fa fa-check"></i><b>5.2.2</b> Sensor Resolution</a></li>
</ul></li>
<li class="chapter" data-level="5.3" data-path="LS-C2-SRST.html"><a href="LS-C2-SRST.html#surface-reflectance-product"><i class="fa fa-check"></i><b>5.3</b> Surface Reflectance Product</a>
<ul>
<li class="chapter" data-level="5.3.1" data-path="LS-C2-SRST.html"><a href="LS-C2-SRST.html#atm-corr"><i class="fa fa-check"></i><b>5.3.1</b> SR Atmospheric Processing</a></li>
</ul></li>
<li class="chapter" data-level="5.4" data-path="LS-C2-SRST.html"><a href="LS-C2-SRST.html#st-product"><i class="fa fa-check"></i><b>5.4</b> Surface Temperature</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="LS-SRST-pull.html"><a href="LS-SRST-pull.html"><i class="fa fa-check"></i><b>6</b> Landsat Collection 2 SRST Data Product</a>
<ul>
<li class="chapter" data-level="6.1" data-path="LS-SRST-pull.html"><a href="LS-SRST-pull.html#changes-from-aquasat-v1-and-limnosat-us"><i class="fa fa-check"></i><b>6.1</b> Changes from AquaSat v1 and LimnoSat-US</a></li>
<li class="chapter" data-level="6.2" data-path="LS-SRST-pull.html"><a href="LS-SRST-pull.html#overview-of-acquisition-steps"><i class="fa fa-check"></i><b>6.2</b> Overview of Acquisition Steps</a>
<ul>
<li class="chapter" data-level="6.2.1" data-path="LS-SRST-pull.html"><a href="LS-SRST-pull.html#custom-config"><i class="fa fa-check"></i><b>6.2.1</b> Creating a Custom Configuration File</a></li>
</ul></li>
<li class="chapter" data-level="6.3" data-path="LS-SRST-pull.html"><a href="LS-SRST-pull.html#technical-implementation-of-gee-acquisition-script"><i class="fa fa-check"></i><b>6.3</b> Technical Implementation of GEE Acquisition Script</a>
<ul>
<li class="chapter" data-level="6.3.1" data-path="LS-SRST-pull.html"><a href="LS-SRST-pull.html#masking-functions"><i class="fa fa-check"></i><b>6.3.1</b> Custom Earth Engine Masking Functions</a></li>
<li class="chapter" data-level="6.3.2" data-path="LS-SRST-pull.html"><a href="LS-SRST-pull.html#dswe-implementation"><i class="fa fa-check"></i><b>6.3.2</b> Defining water area</a></li>
</ul></li>
<li class="chapter" data-level="6.4" data-path="LS-SRST-pull.html"><a href="LS-SRST-pull.html#diagnostic-columns"><i class="fa fa-check"></i><b>6.4</b> Additional diagnostic data columns</a></li>
<li class="chapter" data-level="6.5" data-path="LS-SRST-pull.html"><a href="LS-SRST-pull.html#payload-handling"><i class="fa fa-check"></i><b>6.5</b> Payload handling</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="post-hoc-qa.html"><a href="post-hoc-qa.html"><i class="fa fa-check"></i><b>7</b> Post-Hoc Quality Assurance</a>
<ul>
<li class="chapter" data-level="7.1" data-path="post-hoc-qa.html"><a href="post-hoc-qa.html#raw-lakesr"><i class="fa fa-check"></i><b>7.1</b> Raw lakeSR &amp; siteSR stack collation</a></li>
<li class="chapter" data-level="7.2" data-path="post-hoc-qa.html"><a href="post-hoc-qa.html#post-hoc-filters"><i class="fa fa-check"></i><b>7.2</b> Post-hoc filters</a>
<ul>
<li class="chapter" data-level="7.2.1" data-path="post-hoc-qa.html"><a href="post-hoc-qa.html#data-truncation"><i class="fa fa-check"></i><b>7.2.1</b> Data Truncation</a></li>
<li class="chapter" data-level="7.2.2" data-path="post-hoc-qa.html"><a href="post-hoc-qa.html#landsat-4-qa-summary"><i class="fa fa-check"></i><b>7.2.2</b> Landsat 4 QA Summary</a></li>
<li class="chapter" data-level="7.2.3" data-path="post-hoc-qa.html"><a href="post-hoc-qa.html#landsat-5-qa-summary"><i class="fa fa-check"></i><b>7.2.3</b> Landsat 5 QA Summary</a></li>
<li class="chapter" data-level="7.2.4" data-path="post-hoc-qa.html"><a href="post-hoc-qa.html#landsat-7-qa-summary"><i class="fa fa-check"></i><b>7.2.4</b> Landsat 7 QA Summary</a></li>
<li class="chapter" data-level="7.2.5" data-path="post-hoc-qa.html"><a href="post-hoc-qa.html#landsat-8-qa-summary"><i class="fa fa-check"></i><b>7.2.5</b> Landsat 8 QA Summary</a></li>
<li class="chapter" data-level="7.2.6" data-path="post-hoc-qa.html"><a href="post-hoc-qa.html#landsat-9-qa-summary"><i class="fa fa-check"></i><b>7.2.6</b> Landsat 9 QA Summary</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="8" data-path="define-handoff.html"><a href="define-handoff.html"><i class="fa fa-check"></i><b>8</b> Calculating intermission handoffs</a>
<ul>
<li class="chapter" data-level="8.1" data-path="define-handoff.html"><a href="define-handoff.html#additional-filtering-applied"><i class="fa fa-check"></i><b>8.1</b> Additional filtering applied</a></li>
<li class="chapter" data-level="8.2" data-path="define-handoff.html"><a href="define-handoff.html#roy-method"><i class="fa fa-check"></i><b>8.2</b> Roy method</a></li>
<li class="chapter" data-level="8.3" data-path="define-handoff.html"><a href="define-handoff.html#gardner-method"><i class="fa fa-check"></i><b>8.3</b> Gardner method</a></li>
<li class="chapter" data-level="8.4" data-path="define-handoff.html"><a href="define-handoff.html#implementing-roy-handoffs"><i class="fa fa-check"></i><b>8.4</b> Implementing Roy Handoffs</a>
<ul>
<li class="chapter" data-level="8.4.1" data-path="define-handoff.html"><a href="define-handoff.html#roy-deming-correction-landsat-5-to-landsat-7"><i class="fa fa-check"></i><b>8.4.1</b> Roy Deming Correction Landsat 5 to Landsat 7</a></li>
<li class="chapter" data-level="8.4.2" data-path="define-handoff.html"><a href="define-handoff.html#roy-deming-correction-landsat-8-to-landsat-7"><i class="fa fa-check"></i><b>8.4.2</b> Roy Deming Correction Landsat 8 to Landsat 7</a></li>
<li class="chapter" data-level="8.4.3" data-path="define-handoff.html"><a href="define-handoff.html#roy-deming-correction-landsat-7-to-landsat-8"><i class="fa fa-check"></i><b>8.4.3</b> Roy Deming Correction Landsat 7 to Landsat 8</a></li>
</ul></li>
<li class="chapter" data-level="8.5" data-path="define-handoff.html"><a href="define-handoff.html#implementing-gardner-handoffs"><i class="fa fa-check"></i><b>8.5</b> Implementing Gardner Handoffs</a>
<ul>
<li class="chapter" data-level="8.5.1" data-path="define-handoff.html"><a href="define-handoff.html#gardner-correction-landsat-5-to-landsat-7"><i class="fa fa-check"></i><b>8.5.1</b> Gardner Correction Landsat 5 to Landsat 7</a></li>
<li class="chapter" data-level="8.5.2" data-path="define-handoff.html"><a href="define-handoff.html#gardner-correction-landsat-8-to-landsat-7"><i class="fa fa-check"></i><b>8.5.2</b> Gardner Correction Landsat 8 to Landsat 7</a></li>
<li class="chapter" data-level="8.5.3" data-path="define-handoff.html"><a href="define-handoff.html#gardner-correction-landsat-7-to-landsat-8"><i class="fa fa-check"></i><b>8.5.3</b> Gardner Correction Landsat 7 to Landsat 8</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="9" data-path="references.html"><a href="references.html"><i class="fa fa-check"></i><b>9</b> References</a></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">AquaMatch: lakeSR and siteSR</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="locs-data-acq" class="section level1 hasAnchor" number="3">
<h1><span class="header-section-number">3</span> Locations of Data Acquisition<a href="locs-data-acq.html#locs-data-acq" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<p>As noted in the Introduction (Section <a href="index.html#introduction">1</a>), for the purposes of
AquaMatch, surface reflectance and surface temperature data are acquired at
specific, centrally-located points within waterbodies (typically in deep
locations of lakes, lakeSR) and at locations where there are in situ data
(siteSR). For the purposes of lakeSR, we consider “deep” locations to be
relative to a waterbody and defined by the NHD waterbody feature, where a deep
location is far from the shoreline indicated by the NHD (see Section
<a href="locs-data-acq.html#waterbodies">3.1</a>). The data acquired at locations where there are in situ data
are meant to create location-specific algorithms using the AquaMatch database,
which can then be applied to the data collected over the centrally-located point
across all waterbodies in the lakeSR database. lakeSR does not acquire nor
summarize data over the entire waterbody’s surface, as it is computationally
impractical for most large lakes, especially those that cross multiple satellite
path-rows or tiles. For the lakeSR product, we summarize the Landsat data within
a 120 meter radius of a defined location. For siteSR, we use a 200 meter buffer.</p>
<p>AquaMatch products summarize data within a buffered area of unique locations
primarily to reduce computation time versus aggregating the entire lake area and
to reduce issues with lakes that lie within more than one WRS2 path-row which
would require additional data handling steps at both the remote sensing and
post-hoc filter steps to provide consistent data summaries. This may mean that
each waterbody has differing proportions of the area represented in the data
summaries. Users may wish to consider total surface area of waterbodies
(provided in the output file <code>lakeSR_poi_with_flags_xDATEx.csv</code> via the column
<code>areasqkm</code>) when analyzing the remote sensing data.</p>
<div id="waterbodies" class="section level2 hasAnchor" number="3.1">
<h2><span class="header-section-number">3.1</span> Waterbodies Included in lakeSR<a href="locs-data-acq.html#waterbodies" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>For lakeSR, we use the NHDPlusV2 dataset for lakes within the conterminous US
using the {nhdplusTools} R package <span class="citation">(Blodgett and Johnson 2023)</span> and the NHD Best Resolution
<span class="citation">(e.g. US Geological Survey 2023b)</span> data through The National Map for lakes outside of
the extent of the conterminous US. Two versions are used because NHDPlusV2
waterbodies are not available outside of CONUS. The NHD Best Resolution data are
of slightly higher resolution relative to NHDPlusV2 and are complete and
available for all states and territories outside CONUS. All waterbody polygons
were downloaded and processed on 2025-02-12 by HUC4 using the most
updated version available at the time of download.</p>
<div class="figure"><span style="display:block;" id="fig:NHDPlusV2-HUC4"></span>
<img src="https://d9-wret.s3.us-west-2.amazonaws.com/assets/palladium/production/s3fs-public/thumbnails/image/WBD_SubRegions_24x18.png" alt="NHD HUC4 map for the United States and Territories, courtesy of the USGS."  />
<p class="caption">
Figure 3.1: NHD HUC4 map for the United States and Territories, courtesy of the USGS.
</p>
</div>
<p>For every HUC4 in the United States and Territories (Figure
<a href="locs-data-acq.html#fig:NHDPlusV2-HUC4">3.1</a>), all waterbodies are limited to those with <a href="https://www.usgs.gov/ngp-standards-and-specifications/national-hydrography-dataset-nhd-data-dictionary-feature-classes">NHD
Waterbody
Subtypes</a>
belonging to the following groups: 390 (lake/pond) and 436 (reservoir) and are
at least 0.01 km<sup>2</sup> (1 hectare) in area according to the area value provided in
the NHD file. If the <a href="https://www.usgs.gov/ngp-standards-and-specifications/national-hydrography-dataset-nhd-data-dictionary-feature-domains">feature type
(FType)</a>
of the waterbody belonged to an intermittent category (39001, 39005, 39006,
43614) the threshold for inclusion was increased to 0.04 km<sup>2</sup> (4 hectares) to
reduce processing time when extracting data from Google Earth Engine assuming
that intermittent waterbodies smaller than 4 hectares would not normally be
“visible” in remote sensing (see Section <a href="locs-data-acq.html#rs-vis">3.2.1</a>). This filtering resulted
in 729,941 waterbodies included in
our dataset, including 313,248 non-CONUS
waterbodies. This is a
1,185
percent increase over the 56,792 lakes included in the original AquaSat product.</p>
<p>For each waterbody, the Pole of Inaccessibility (see Section <a href="locs-data-acq.html#poi">3.1.2</a>) and
distance-to-shore radius was calculated using the <code>polylabelr::poi()</code> function.</p>
<div id="updates-in-aquamatch" class="section level3 hasAnchor" number="3.1.1">
<h3><span class="header-section-number">3.1.1</span> Updates in AquaMatch<a href="locs-data-acq.html#updates-in-aquamatch" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Some changes in lake polygon and center point have been made in modernizing and
scaling from LimnoSat-US. The lake center aspect called “deepest point” of
LimnoSat-US was built upon HydroLakes <span class="citation">(Messager et al. 2016)</span>, a global database of
lakes greater than 10 hectares accounting for 1.4 million waterbodies and a
total surface area of 2.67 million km² worldwide. While this dataset of lakes
represents ~55% of the worldwide surface area of lakes greater than 1 hectare,
it is only a sliver of the estimated 27 million waterbodies in the world
<span class="citation">(Verpoorter et al. 2014)</span>. AquaMatch uses the <a href="https://www.usgs.gov/national-hydrography">USGS’s National Hydrography
products</a> which map the surface
waters of the United States, and allows for reduction in minimum size of
waterbody and an increase in coverage of freshwater systems across the United
States and permanently inhabited territories.</p>
</div>
<div id="poi" class="section level3 hasAnchor" number="3.1.2">
<h3><span class="header-section-number">3.1.2</span> Pole of Inaccessibility<a href="locs-data-acq.html#poi" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>The USGS National Hydrography products contain smaller and higher resolution
polygons than the HydroLakes shapes, which makes it computationally impossible
to use the Chebyshev Center <span class="citation">(“deepest point,” Yang 2020)</span> calculation used in
LimnoSat-US due to the number of vertices in each polygon. To replace this
important step in the update, we employ the concept of “pole of inaccessibility”
<span class="citation">(POI, Stefansson 1920)</span>.</p>
<p>The concept of POI is used to define the geographic center of a circle with the
largest circumference within any complex polygon. The foundational principle is
used widely to describe the arctic pole of inaccessibility, that is the point in
the northern arctic circle that is the furthest from land, but has also been
used to describe the geographic center of landmasses <span class="citation">(Garcia-Castellanos and Lombardo 2007)</span>.
For lakeSR, we use POI to determine the point in a waterbody that is furthest
from the shoreline using the <code>polylabelr::poi()</code> function <span class="citation">(Larsson 2024)</span>, which
calculates a point in space and the radius of the circle used to define the POI.</p>
<p>The <code>poi()</code> function can sometimes attribute a POI to a location other than the
point furthest away from a shoreline. This appears to occur in polygons with a
very large number of indices (due to sheer area or geomorphological complexity);
however the points calculated should be an acceptable proxy for deep lake
conditions operating under the assumption that lake depth increases as distance
from shore increases. No action was taken to correct these or enumerate them
within our dataset given the assumption that the point is still far from shore
(though not always the “farthest”) and there is no obvious programmatic way to
identify these points. Additionally, we did not compare the LimnoSat-US
locations with AquaMatch_lakeSR locations (even for pseudonymous lakes) since
the spatial extent of the polygons used do not share geometries and comparing
locations between these products was outside of the scope of lakeSR at this
time.</p>
</div>
<div id="technical-implementation-of-lakesr" class="section level3 hasAnchor" number="3.1.3">
<h3><span class="header-section-number">3.1.3</span> Technical Implementation of lakeSR<a href="locs-data-acq.html#technical-implementation-of-lakesr" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>The code for gathering NHD waterbodies and calculating their respective POIs is
found in {targets} group a_Calculate_Centers which is located in the script
<a href="https://github.com/aquasat/lakeSR/blob/main/a_Calculate_Centers.R">a_Calculate_Centers.R</a>
at the root directory of the repository.</p>
<p>The processing begins by acquiring the polygons of all US states and territories
using the {tigris} package <span class="citation">(Walker 2025)</span>. These polygons are used to acquire a
list HUC4s that intersect with each municipal boundary using the
<code>nhdplusTools::get_huc()</code> function, which are then reduced to distinct HUC4’s
and transformed into a vector of HUC4s. HUC4s are then split into CONUS (HUC4 &lt;
1900) and non-CONUS (HUC4 ≥ 1900) groups. To efficiently calculate the POI
across hundreds of HUC4s, we use the {targets} dynamic branching feature to
iterate over each HUC4. For each HUC4, the NHDPlusV2 (CONUS) or NHD Best
Resolution (non CONUS) waterbodies are acquired and filtered for lake/ponds and
reservoirs of at least 1 hectare in area or 4 hectares for intermittent
lake/ponds or reservoirs.</p>
<p>In order to accurately calculate distance-to-shore when using the
<code>polylabelr::poi()</code> function as described in Section <a href="locs-data-acq.html#waterbodies">3.1</a>, each
waterbody was converted to the proper Universal Transverse Mercator (UTM)
projection calculated from the mean longitudinal value of the polygon vertices
prior to applying the poi() function. By using the point-local UTM projection,
we decrease distortion expected from any single CRS used to represent all of the
locations from which we have lakes. The latitude and longitude values of the POI
were transformed to decimal degrees in World Geodetic System 1984 (WGS84,
EPSG:4326) from UTM easting and northing coordinates for use later in the
workflow. Within the data presented in optical remote sensing products from
AquaMatch, we do not currently flag reflectance data for possible bottom
reflectance signals (that is, we do not signifiy whether the optical reflectance
values are wholly attributable to the water column or whether there may be
signals of sediment reflectance due to clear water/shallow bathymetry at the
given location). Users should consider that, especially at sites where the
distance to shore is small or where the waterbody is particularily shallow, that
there may be bottom reflectance introduced into the remote sensing summaries. We
encourage users to consider this in their analysis and interpretation of the
data.</p>
<p>Note: AquaMatch assumes static water elevation and inundation area based on the
associated NHD features. Given this, users should consider whether elevational
changes in surface water height (and therefore inundation area) may impact their
analyses or interpretation of the information provided in the location data.</p>
<p>To increase computational efficiency, we allow for multicore processing and the
use of <code>targets::crew_controller_local()</code> function within this workflow. This
reduces processing time substantially as processing thousands of polygons is
quite time consuming. If you are running this workflow on your own computer, the
length of time that it takes to calculate POIs will be dependent on the number
of cores you allow for processing (we used 11 cores
during the development of this workflow).</p>
</div>
<div id="lakeSR-shoreline" class="section level3 hasAnchor" number="3.1.4">
<h3><span class="header-section-number">3.1.4</span> Flagging shoreline proximity<a href="locs-data-acq.html#lakeSR-shoreline" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Within the context of lakeSR, we do not identify whether there are multiple
waterbodies/visible water sources within the site buffer used for lakeSR or
siteSR extraction. We do offer two flags to help users assess possibilities of
shoreline contamination through a simple calculation. This calculation is based
on the distance to shore calculated in the POI step, which does not account for
differing shoreline locations due to water surface level change. A flagged pixel
for shoreline proximity also does not imply that the data are contaminated,
rather is intended as a diagnostic tool to identify sites that may be more
likely to have some sort of shoreline contamination. Because the lakeSR pipeline
uses a dynamic water filter for each point and each Landsat scene (see Section
<a href="LS-SRST-pull.html#dswe-implementation">6.3.2</a>), shoreline and mixed pixels should be masked from
the lakeSR data.</p>
<p>To determine the possibility of shoreline contamination, we add the site buffer
used for GEE extraction (defined in the lakeSR GEE configuration file) to the
pixel size of the sensor used for reflectance detection (see Section
<a href="LS-C2-SRST.html#sensor-resolution">5.2.2</a> for details). For optical bands (Red, Green, Blue, Nir,
Swir) we use the site buffer plus 30 meters. For thermal bands, we create 3 flag
columns for each sensor’s (Landsat 4/5: MSS, Landsat 7: ETM, Landsat 8/9: TIRS)
native thermal resolution (120, 60, 100 meters). These flags are binary and are
inlcuded in the <code>lakeSR_poi_with_flags_xDATEx.csv</code> file:</p>
<blockquote>
<p>0: unlikely shoreline contamination (distance to shore is greater than the sum
of the site buffer and pixel size)</p>
<p>1: possible shoreline contamination (distance to shore is less than or equal
to sum of the site buffer and pixel size)</p>
</blockquote>
</div>
<div id="case-study-wisconsin-waterbodies" class="section level3 hasAnchor" number="3.1.5">
<h3><span class="header-section-number">3.1.5</span> Case Study: Wisconsin Waterbodies<a href="locs-data-acq.html#case-study-wisconsin-waterbodies" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>The state of Wisconsin contains more than 15,000 freshwater lakes. LimnoSat-US
contained just 2,694 waterbodies within
Wisconsin, whereas AquaMatch via the lakeSR product includes
10,574 (Figure <a href="locs-data-acq.html#fig:WI-lakes">3.2</a>) -
accounting for a majority of the state’s freshwater water bodies.</p>
<div class="figure"><span style="display:block;" id="fig:WI-lakes"></span>
<img src="AquaMatch_lakeSR_files/figure-html/WI-lakes-1.png" alt="Deepest point of Wisconsin lakes included in LimnoSat-US defined by the Hydrolakes data product (left) and those included in AquaMatch via lakeSR defined by the NHDPlusV2 data product (right). Deepest point for each lake is indicated with a black dot, spatial histogram of density by longitude and latitude presented below the maps." width="672" />
<p class="caption">
Figure 3.2: Deepest point of Wisconsin lakes included in LimnoSat-US defined by the Hydrolakes data product (left) and those included in AquaMatch via lakeSR defined by the NHDPlusV2 data product (right). Deepest point for each lake is indicated with a black dot, spatial histogram of density by longitude and latitude presented below the maps.
</p>
</div>
</div>
</div>
<div id="siteSR-locs" class="section level2 hasAnchor" number="3.2">
<h2><span class="header-section-number">3.2</span> siteSR Acquisition Locations<a href="locs-data-acq.html#siteSR-locs" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>The acquisition locations within siteSR are defined using the {dataRetrieval}
package functions <code>whatWQPsites()</code> and <code>whatNWISsites()</code>. All sites were
filtered for those that represent surface water according to the populated
<code>MonitoringLocationTypeName</code> for WQP sites and <code>type_cd</code> for NWIS sites. These
sites were supplemented by those for which we have harmonized parameter data
from the AquaMatch parameter harmonization pipeline but that did not appear in
the <code>whatWQPsites()</code> query, due to the dynamic nature of the WQP. The siteSR
pipeline collates these sites, then reduces that collation to only distinct
sites defined by organization identifier, monitoring location identifier, WGS84
latitude and WGS84 longitude. Across the WQP, NWIS, and the harmonization
pipeline, there are currently
1,207,214 distinct sites in the
United States and Territories for which we create “stacks” of remote sensing
data. A “stack” refers to all the remote sensing data available during a time
period of interest at a single site.</p>
<p>Every site in the WQP has a <code>MonitoringLocationTypeName</code> associated with it. For
the purposes of siteSR, we do not subset the sites by these types, but they are
helpful for understanding the type of data included in siteSR.</p>
<div class="figure"><span style="display:block;" id="fig:siteSR-types-WQP"></span>
<img src="AquaMatch_lakeSR_files/figure-html/siteSR-types-WQP-1.png" alt="Water Quality Portal data location types present in siteSR. Unique WQP monitoring location count above bar, divided by `MonitoringLocationTypeName`." width="672" />
<p class="caption">
Figure 3.3: Water Quality Portal data location types present in siteSR. Unique WQP monitoring location count above bar, divided by <code>MonitoringLocationTypeName</code>.
</p>
</div>
<p>Similarly, every site in the NWIS database has a <code>type_cd</code> associated with it.</p>
<p>For siteSR, we will acquire Landsat stacks for all sites deemed “visible” by
remote sensing (see Section <a href="locs-data-acq.html#rs-vis">3.2.1</a> for further information). Note that
this is different from lakeSR, where we only acquire data for lakes, reservoirs
and pond according to the NHD. This was a functional choice, as most canal sites
will not be RS-visible and estuary extents are limited in the NHD (and when
present the technique to determine the POI may not be appropriate).</p>
<div id="rs-vis" class="section level3 hasAnchor" number="3.2.1">
<h3><span class="header-section-number">3.2.1</span> Assessing for remote sensing visibility<a href="locs-data-acq.html#rs-vis" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>We use the JRC Global Surface Water Mapping Layers v1.4 <span class="citation">(Pekel et al. 2016)</span> to
determine whether or not sites are visible by remote sensing (“RS-visible”) and
should therefore be sent through the GEE data acquisition process detailed in
Section <a href="LS-SRST-pull.html#LS-SRST-pull">6</a>. This dataset is a compilation of 38 years of the
Landsat record and enumerates the proportion of time a single 30x30 meter pixel
has the presence of water. As long as a WQP monitoring location has at least one
pixel with water at least 80% of the time during that 38 year period within a
200 meter radius, we include it in the list of sites we acquire Landsat stacks
for. Like with assessing possible shoreline contamination, we do not analyze
whether the presence of water within the AquaMatch buffer is associated with a
singular waterbody or flowline feature from the NHD. See Section
<a href="locs-data-acq.html#fl-wb-assignment">3.2.2</a> for details on attribution of a site to NHD feature and
the associated assumptions. After this assessment,
395,307 sites were deemed to be
visible by remote sensing
(67.3%
loss of sites).</p>
<div class="figure"><span style="display:block;" id="fig:siteSR-filtered"></span>
<img src="AquaMatch_lakeSR_files/figure-html/siteSR-filtered-1.png" alt="Water Quality Portal data location types present in siteSR after filtering for those that are deemed visible by remote sensing. Count of sites provided above bar, arranged by `MonitoringLocationTypeName`." width="672" />
<p class="caption">
Figure 3.4: Water Quality Portal data location types present in siteSR after filtering for those that are deemed visible by remote sensing. Count of sites provided above bar, arranged by <code>MonitoringLocationTypeName</code>.
</p>
</div>
</div>
<div id="fl-wb-assignment" class="section level3 hasAnchor" number="3.2.2">
<h3><span class="header-section-number">3.2.2</span> Assignment of NHD flowline and waterbodies<a href="locs-data-acq.html#fl-wb-assignment" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>For each WQP monitoring location, we attempt to assign HUC8’s wherever they are
missing from the <code>HUCEightDigitCode</code> column output from the WQP (n =
227955). To do this we
use the <code>get_huc()</code> function from {nhdplusTools} <span class="citation">(Blodgett and Johnson 2023)</span> package in R.
After HUC8 assignment is finished only
25628 sites remained
without a HUC8 assignment. All of these sites were coastal sites outside of the
extent of NHD boundaries. These sites remain in siteSR, but will have no NHD
attribution information. In siteSR, the <code>flag_HUC8</code> column indicates whether
this HUC8 was assigned within the WQP (value of 0), assigned in this process
(value of 1), or was unable to be assigned (value of 2).</p>
<p>Using the HUC8 information to iterate, we then can use {nhdplusTools} to assign
waterbodies and flowlines to sites within the CONUS and data from The National
Map best resolution files <span class="citation">(e.g. US Geological Survey 2023b)</span> for sites outside of CONUS
by HUC4. For all sites with a <code>MonitoringLocationTypeName</code> that contains the
words “lake” or “reservoir”, we assign NHD ids to each point for the waterbody
it is contained by or the waterbody it is closest to. NHD waterbody file has
been filtered to only contain Lake, Ponds, Reservoirs, and Estuaries (NHD
feature types 390, 436, 493) when performing this task. We flag (<code>flag_wb</code>) the
results of this assignment as follows:</p>
<blockquote>
<p>0: point inside NHD waterbody polygon</p>
<p>1: point within GEE buffer distance (default 200 meters for siteSR) of the NHD
waterbody</p>
<p>2: point between GEE buffer distance and 500 meters of the NHD waterbody
polygon</p>
<p>3: point unable to be assigned to waterbody (it is &gt; 500 meters away from the
NHD waterbody polygon)</p>
<p>4: point does not have HUC8 assignment or MonitoringLocationTypeName does not
contain “lake”, “reservoir”, or “estuary”. No waterbody is assigned.</p>
</blockquote>
<p>For all points with a flag value of 0 or 1 we provide the NHD identifier for the
polygon the monitoring location is associated with (comid for NHDPlusV2 and
permanent identifier for NHD Best Resolution), for all points with a flag value
of 1 or 2, we provide the distance (in meters) to the nearest NHD waterbody of
feature type 390, 436, or 493. For waterbodies with a flag of 0, we provide
distance to shore. We follow lakeSR’s implementation of flags for shoreline
proximity for these sites as well, but with the siteSR default site buffer of
200 meters instead of lakeSR’s buffer of 120 meters.</p>
<p>Flowlines are assigned to sites with a MonitoringLocationTypeName that contains
“lake”, “reservoir”, “stream”, or “river”. NHD flowlines are filtered to contain
streams/rivers and artificial paths (that is flowlines in waterbodies) (NHD
feature types 460 and 558). We flag (<code>flag_fl</code>) the results of this assignment
as follows:</p>
<blockquote>
<p>0: point &lt;= 100 meters from nearest flowline</p>
<p>1: point between 100 meters and GEE buffer distance (default 200 meters for
siteSR) to nearest flowline</p>
<p>2: point between GEE buffer distance and 500 meters from nearest flowline</p>
<p>3: point unable to be assigned to flowline for a stream site because distance
to nearest stream &gt; 500 meters</p>
<p>4: point is a lake or reservoir site and is &gt; 500 meters away from nearest
flowline</p>
<p>5: point does not have HUC8 assignment or MonitoringLocationTypeName does not
contain “stream”, “river”, “lake”, or “reservoir”. No flowline assigned.</p>
</blockquote>
<p>For all points with a flag 0/1/2 we provide the NHD identifier for the flowline
the monitoring location is associated with (comid for NHDPlusV2 and permanent
identifier for NHD Best Resolution), for all points with a flag value of 1-3, we
provide the distance (in meters) to the nearest NHD flowline of feature type 460
or 558.</p>
<p>For all sites, we calculate how many waterbodies or flowlines are within the
buffer distance set in the siteSR GEE configuration file. Any site that has more
than one waterbody and/or flow line within the buffer distance may be including
reflectance data from another surface water source. Within the context of
siteSR, we do not investigate what, if any, impacts multiple waterbodies,
flowlines, or combinations thereof have on the validity of the reflectance data
or thermal data summary.</p>
<p>Site information, NHD attribution, and associated flags described here are
stored in the file <code>collated_WQP_NWIS_sites_with_NHD_info.csv</code>. We provide these
identifiers and additional metadata about the sites to help users make informed
decisions about remote sensing data quality (specifically, related to
edge/shoreline contamination) and NHD comid/permanent id attribution to
individual sites and any available flags to assess uncertainty to those
assignments or the buffered area relative to the site.</p>
</div>
<div id="sitesr-updates-in-aquamatch" class="section level3 hasAnchor" number="3.2.3">
<h3><span class="header-section-number">3.2.3</span> siteSR updates in AquaMatch<a href="locs-data-acq.html#sitesr-updates-in-aquamatch" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>In our updated workflow, we acquire and provide the historical Landsat stacks
for all sites collated from the harmonization pipeline, regardless of whether
they are associated with a specific in situ observation. In the previous
iteration, we only provided a matchup dataset for in situ data. Assigning
flowlines and waterbodies to all siteSR sites is also a feature introduced in
AquaMatch.</p>

</div>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="background.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="software-settings.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
  "sharing": {
    "github": false,
    "facebook": true,
    "twitter": true,
    "linkedin": false,
    "weibo": false,
    "instapaper": false,
    "vk": false,
    "whatsapp": false,
    "all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
  },
  "fontsettings": {
    "theme": "white",
    "family": "sans",
    "size": 2
  },
  "edit": {
    "link": null,
    "text": null
  },
  "history": {
    "link": null,
    "text": null
  },
  "view": {
    "link": null,
    "text": null
  },
  "download": null,
  "search": {
    "engine": "fuse",
    "options": null
  },
  "toc": {
    "collapse": "subsection"
  }
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/latest.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
