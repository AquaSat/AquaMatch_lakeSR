---
editor_options:
  markdown:
    wrap: 80
bibliography: references.bib
---

# Satellite Data Acquisition Software and Settings {#software-settings}

Currently, all satellite data in AquaSat are obtained using the Python API for
Google Earth Engine (GEE) [@gorelick2017]. While the orchestration of data
acquisition is performed by {targets}, a workflow management program for R, all
code directly related to GEE data acquisition is written in Python.

## {reticulate} Conda Environment

RStudio [@positteam2023] is an IDE that, alongside the {reticulate} package
[@ushey2023], facilitates integration of R and Python code within the same
environment. In lakeSR, we use [a singular R
script](https://github.com/AquaSat/lakeSR/blob/main/python/pySetup.R) to set up
a {reticulate} Conda environment that is invoked at the beginning of a {targets}
run (lines 8-12 of the
[\_targets.R](https://github.com/AquaSat/lakeSR/blob/main/_targets.R) file) to
be sure that our Python code runs consistently.

| Software/Py Module | version | citation |
|----------------|:--------------:|-------------------------------------------------|
| Python | 3.10.13 | Python Software Foundation, [www.python.org](www.python.org) |
| earthengine-api | 1.4.0 | @gorelick2023 |
| pandas | 2.0.3 | @thepandasdevelopmentteam2023 |
| pyreadr | 0.5.2 | @fajardo2023 |
| PyYAML | 6.0.2 | The PyYAML Project, <https://github.com/yaml/pyyaml> |
| numpy | 1.24.4 | @harris2020 |

: Python and python module

The script `run_targets.Rmd` includes the steps to create this environment and
authenticate your GEE user. These steps should be run prior to running the
pipeline to assure a smooth run of the workflow.

## Google Earth Engine Setup

### Create a GEE account

Creation of a GEE is easy and free. Click 'Get Started' at the far right side of
the [earthengine.google.com](https://earthengine.google.com) webpage to create
an account:

[![Header of earthengine.google.com with link to create a GEE account
highlighted in the red box to the
right.](images/EE_header.png)](https://earthengine.google.com)

### gcloud CLI

This workflow requires the installation and initiation of [gcloud
CLI](https://cloud.google.com/sdk/gcloud), a command-line tool set for accessing
Google Cloud Resources. All settings for lakeSR and siteSR are default `gcloud`
configurations using a singular GEE project.

### GEE Authentication

Once `gcloud` is installed and initialized and the Conda environment is set up,
you can authenticate your GEE instance. For this workflow, this is completed in
the `run_targets.Rmd` script at the root directory. This script provides
explicit directions to complete this task before running the pipeline.

### GEE project setting

lakeSR is run in a specific GEE project associated with our authenticated
account. If you wish to re-run this code as written, you will not have proper
access because the code refers to our specific GEE project. You will need to
update the config yaml (`b_pull_Landsat_SRST_poi/config_files/config_poi.yml`)
with your Google credentials and GEE project in order to run this locally. A
blank yml file (`b_pull_Landsat_SRST_poi/config_files/config.yml`) is provided
for further customization. If you are new to GEE, go to
[code.earthengine.google.com](https://code.earthengine.google.com) and enter the
project name listed in the top right hand corner of your screen:

[![Header of code.earthengine.google.com with current Earth Engine project
highlighted in the red box to the
right.](images/code_ee_proj.png)](https://code.earthengine.com)

Alternatively, you can create an GEE project for this task in the dropdown menu
accessed by clicking on the icon to the right of the highlighted box in the
figure above. This workflow will not run without specifying an Earth Engine
Project that is managed by the Google Account you authenticate this run with.
